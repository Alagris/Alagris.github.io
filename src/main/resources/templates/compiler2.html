<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="Mark Otto, Jacob Thornton, and Bootstrap contributors">
    <meta name="generator" content="Jekyll v4.1.1">
    <title>Solomonoff - Compiler</title>

    <link rel="canonical" href="https://getbootstrap.com/docs/4.5/examples/jumbotron/">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css" integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" crossorigin="anonymous">
    <link rel="apple-touch-icon" href="images/ph1.png" sizes="180x180">
    <link rel="manifest" href="https://getbootstrap.com/docs/4.5/assets/img/favicons/manifest.json">
    <link rel="mask-icon" href="https://getbootstrap.com/docs/4.5/assets/img/favicons/safari-pinned-tab.svg" color="#563d7c">
    <link rel="icon" href="images/ph1.ico">
    <meta name="msapplication-config" content="/docs/4.5/assets/img/favicons/browserconfig.xml">
    <meta name="theme-color" content="#563d7c">
    <script type='text/javascript' src='js/jquery.js'></script>
    <script src="js/FileSaver.js"></script>
    <script src="https://kit.fontawesome.com/a1ef51e063.js" crossorigin="anonymous"></script>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
    <link rel="stylesheet" href="js/enjoyhint.css">
    <script language="javascript" type="text/javascript" src="js/viz.js"> </script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/kineticjs/5.2.0/kinetic.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-scrollTo/2.1.2/jquery.scrollTo.min.js"></script>
    <script src="js/enjoyhint.js"></script>
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js" integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.min.js" integrity="sha384-w1Q4orYjBQndcko6MimVbzY0tgp4pWB4lZ7lr30WKz0vr/aWKhXdBNmNb5D92v7s" crossorigin="anonymous"></script>



    <style>
        .qgca {/*quick guide code area*/
          background-color:#18222d;
          color:white;
          border-radius:3px;
          border: solid #2a394a thin;
        }
        a.qgca {
          pointer-events: none;
        }
        .button {
          background-color: #4CAF50; /* Green */
          border: none;
          color: white;
          padding: 1px 32px;
          text-align: center;
          text-decoration: none;
          display: inline-block;
          font-size: 16px;
          /* margin: 4px 2px; */
          transition-duration: 0.4s;
          cursor: pointer;
        }

        .buttonSmall {
          background-color: #FFA500;
          text-align: right;
          border: none;
          color: white;
          padding: 0px 26px;
          text-align: center;
          text-decoration: none;
          display: inline-block;
          font-size: 16px;
          transition-duration: 0.4s;
          cursor: pointer;
          margin-left: auto;
          margin-right: 0em;
        }

        .button1 {
          background-color: white;
          color: black;
          border: 2px solid #4CAF50;
        }

        .button1:hover {
          background-color: #4CAF50;
          color: white;
        }

        .button2 {
          background-color: white;
          color: black;
          border: 2px solid #008CBA;
        }

        .button2:hover {
          background-color: #008CBA;
          color: white;
        }

        .button3 {
          background-color: white;
          color: black;
          border: 2px solid #f44336;
        }

        .button3:hover {
          background-color: #f44336;
          color: white;
        }

        .button4 {
          background-color: white;
          color: black;
          border: 2px solid #e7e7e7;
        }

        .button4:hover {background-color: #e7e7e7;}

        .button5 {
          background-color: white;
          color: black;
          border: 2px solid #555555;
        }

        .button5:hover {
          background-color: #555555;
          color: white;
        }

      @media only screen and (min-height: 650px) {
        body {
            /* background-color: lightblue; */
             overflow: hidden;
            }
        }
      @media only screen and (max-height: 651px) {
        body {
        overflow: auto;
    }
    }

      .bd-placeholder-img {
        font-size: 1.125rem;
        text-anchor: middle;
        -webkit-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        user-select: none;
      }

      @media (min-width: 768px) {
        .bd-placeholder-img-lg {
          font-size: 3.5rem;
        }
      }


      .j{
       float: right;
      }
    
       
        .row_cont {
            width: 100%;
            height: 93vh;
            display: flex;
            flex-direction: row;

        }
        .first {
            background: #bfc4c9;
            width:60%;
            border: 2px solid gray;
            margin-left: 8px;
           /* padding-bottom: 4%;*/
            margin-bottom: 5px;
            border-right: 6px solid rgb(111, 114, 111);
            border-bottom: 6px solid rgb(111, 114, 111);
        }
        .buttonSection{
          border-left: 6px solid rgb(111, 114, 111);
          border-bottom: 6px solid rgb(111, 114, 111);
          padding: 2px;
        }
        .second {
            background: #bfc4c9;
            width:40%;
            margin-left: 8px;
            margin-right: 8px;
        }
        .gh{
            margin-top: 5px;
            border:1px;
            height: 5%;
            width: 100%;
            border-style: none;
            /* background: blue; */
           background-color: #bfc4c9;
        }
    
    #editor {
       height: 52%;
       width: 100%;
       margin-bottom: 5px;

    }

    #outputField {
       height: 25%;
       width: 100%;
       background-color:#18222d;
       color:#fff;
    }
    #inputField{
       width: 100%;
       background-color:#18222d;
       color:#fff;
    }


    div.ex1 {
      width: 100%;
      height: 94%;
      overflow: scroll;
      border-left: 6px solid rgb(111, 114, 111);
      border-top: 6px solid rgb(111, 114, 111);
      background: #c7b39b url(images/bg1.png);
      margin-top: 5px;
      padding: 10px;
    }

  .modal {
    display: none; /* Hidden by default */
    position: fixed; /* Stay in place */
    z-index: 1; /* Sit on top */
    padding-top: 100px; /* Location of the box */
    left: 0;
    top: 0;
    width: 100%; /* Full width */
    height: 100%; /* Full height */
    overflow: auto; /* Enable scroll if needed */
    background-color: rgb(0,0,0); /* Fallback color */
    background-color: rgba(0,0,0,0.4); /* Black w/ opacity */
  }


  .modal-content {
    position: relative;
    background-color: #fefefe;
    margin: auto;
    padding: 0;
    border: 1px solid #888;
    width: 80%;
    box-shadow: 0 4px 8px 0 rgba(0,0,0,0.2),0 6px 20px 0 rgba(0,0,0,0.19);
    -webkit-animation-name: animatetop;
    -webkit-animation-duration: 0.4s;
    animation-name: animatetop;
    animation-duration: 0.4s
  }


  @-webkit-keyframes animatetop {
    from {top:-300px; opacity:0}
    to {top:0; opacity:1}
  }

  @keyframes animatetop {
    from {top:-300px; opacity:0}
    to {top:0; opacity:1}
  }


  .close {
    color: white;
    float: right;
    font-size: 28px;
    font-weight: bold;
    margin: 0 auto;
  }

  .close:hover,
  .close:focus {
    color: #000;
    text-decoration: none;
    cursor: pointer;
  }

  .modal-header {
    padding: 2px 16px;
    background-color: #5cb85c;
    color: white;
  }

  .modal-body {padding: 2px 16px;}

  .modal-footer {
    padding: 2px 16px;
    background-color: #5cb85c;
    color: white;
  }
</style>


    <script>


        function saveStaticDataToFile() {
            var val2 = outputField.value;
            var val1 = editor.getSession().getValue();
            var val4 = "Code: \n\n";
            var val5 = "\n\nConsole:  \n\n";
            var val3 = val4 + val1 + val5 + val2;
            var blob = new Blob([val3],
              { type: "text/plain;charset=utf-8" });
            saveAs(blob, "SavedGrammar.mealy");
           }
    

  replHistory = []
  replHistoryIndex = 0
  replCurrent = ""
  const MAX_REPL_LENGTH = 3000
   async function listAutomata(){
      const response = await fetch('list_automata',{method:'POST'})
      const replResult = await response.text()
     // const automata = JSON.parse(replResult)
     // var ll = "";
     // while (automataHtmlList.firstChild)
     //     automataHtmlList.removeChild(automataHtmlList.firstChild);
     // for(var i=0;i<automata.length;i++){
     //    var item = document.createElement('li');
     //     ll = ll+automata[i]+" ,";
          // Set its contents:
     //     item.appendChild(document.createTextNode(automata[i]));

          // Add it to the list:
     //     automataHtmlList.appendChild(item);
    //  }
      //var tok = automataHtmlList + "";
     // automataHtmlList.toString();
     // automataHtmlList.join('; ');
    //var fok = "Define variables: " + ll;
    tips.innerText = replResult;


    //  document.getElementsByName('inp')[0].placeholder=fok;

  }

  function escapeCookie(cookieText){
      escaped = ''
      for (var i = 0; i < cookieText.length; i++) {
        if(cookieText.charAt(i)==';'){
          escaped = escaped+'%s'
        }else if(cookieText.charAt(i)=='%'){
          escaped = escaped+'%p'
        }else if(cookieText.charAt(i)=='\n'){
          escaped = escaped+'%n'
        } else {
          escaped = escaped+cookieText.charAt(i)
        }
      }
      return escaped
  }
  function unescapeCookie(cookieText){
      unescaped = ''
      for (var i = 0; i < cookieText.length; i++) {
        if(cookieText.charAt(i)=='%'){
          if(cookieText.charAt(i+1)=='s'){
             unescaped = unescaped+';'
          }else if(cookieText.charAt(i+1)=='p'){
             unescaped = unescaped+'%'
          }else if(cookieText.charAt(i+1)=='n'){
             unescaped = unescaped+'\n'
          }
          i++
        }else{
          unescaped = unescaped+cookieText.charAt(i)
        }
      }
      return unescaped
  }

  function setCookie(key,value){
     document.cookie = key+"="+escapeCookie(value)+";max-age="+(60*60*60)+";"
  }

  function getCookie(key){
     matches = document.cookie.match(';\\s*'+key+'=([^;]*)')
     if(matches==null)return null;
     return unescapeCookie(matches[1])
  }




  async function repl(replCommand){
      replCommand = replCommand.trim()
      if(replCommand===""){replCommand = " "}
      const input = replCommand.match(/\S+/g)
      const firstWord = input==null || input.length===0 ? null : input[0]
      if(firstWord == ":clear"){
          outputField.value = ""
      }else if(firstWord == ":load"){
          const code = editor.getValue().trim()
          setCookie('code',code)
          const response = await fetch('upload_code',{method:'POST',body:code})
          const errorMessage = await response.text()
      }
      const response = await fetch('repl',{method:'POST',body:replCommand})
      const replResult = JSON.parse(await response.text())
      if(firstWord == ":vis" && !replResult.wasError){
          console.log(replResult.output)
          const workerURL = 'js/full.render.js';
          let viz = new Viz({ workerURL });
          viz.renderSVGElement(replResult.output).then(function(element) {
              ji.innerHTML = '';
              ji.appendChild(element);
              var modal = document.getElementById("myModal");
              modal.style.display = "block";
          }).catch(error => {
              // Create a new Viz instance (@see Caveats page for more info)
              viz = new Viz({ workerURL });

              // Possibly display the error
              console.error(error);
          });
      }
      if(replCommand!=null){
         replHistory.push(replCommand)
         replHistoryIndex = replHistory.length
         replBuffer = outputField.value + '> '+replCommand+'\n'+(replResult.output+'\n').trimStart()
      }else{
         replBuffer = outputField.value + (replResult.output+'\n').trimStart()
      }
      outputField.value = replBuffer
      outputField.scrollTop = outputField.scrollHeight
      replCurrent = inputField.value = ""

      if(replResult.wasError){
        outputField.style.borderWidth = 'thick'
        outputField.style.borderColor = "red"
        setTimeout(function(){
           outputField.style.borderWidth = 'thin'
           outputField.style.borderColor = "black"
           },1500);
      }
      listAutomata()

  }

  function htmlDecode(input) {
    var doc = new DOMParser().parseFromString(input, "text/html");
    return doc.documentElement.textContent;
  }
  window.onload = function(){
    inputField.addEventListener("keydown", submitOnEnter);
    codeSavedInCookie = getCookie('code')
    if(codeSavedInCookie == null)return
    editor.setValue(codeSavedInCookie);
    outputField.scrollTop = outputField.scrollHeight
    inputField.addEventListener("keydown", submitOnEnter);
    inputField.addEventListener("paste", function(e){
      var clipboardData = e.clipboardData || e.originalEvent.clipboardData || window.clipboardData;
      if (clipboardData){
        var text = clipboardData.getData('text');
        text = text.replace(/\n/g, ' ');
        e.target.value = text;
        e.preventDefault();
      }
    });

  }

  function compile(){
      if(isSelected){
          repl(editor.getSelectedText())
      }else{
          repl(':load')
      }
  }
  function closeModel(){
      var Cmodal = document.getElementById("myModal");
      Cmodal.style.display = "none";
  }


  function insert(text){
      var customPosition = {
          row: 0,
          column: 0
      };
      //var text = "x = 'trt'";
      editor.setValue(text);
      //editor.session.insert(customPosition , text);
  }

  function submitOnEnter(event){
     if(event.which === 13){
         repl(inputField.value)
         inputField.value = ''
     }else if(event.which === 38){
        if(replHistoryIndex>0){
            if(replHistoryIndex===replHistory.length){
                replCurrent = inputField.value
            }
            replHistoryIndex--
            inputField.value = replHistory[replHistoryIndex]
            inputField.selectionEnd = inputField.selectionStart = 0
        }
     }else if(event.which === 40){
        if(replHistoryIndex+1<replHistory.length){
            replHistoryIndex++
            inputField.value = replHistory[replHistoryIndex]
            inputField.selectionEnd = inputField.selectionStart = 0
        }else if(replHistoryIndex + 1 === replHistory.length){
            replHistoryIndex++
            inputField.value = replCurrent
            inputField.selectionEnd = inputField.selectionStart = 0
        }
     }
 }




  </script>

</head>
<body  style="  background: #c7b39b url(images/bg3.jpg);">

<nav class="navbar navbar-expand-md navbar-dark fixed-top bg-dark">
    <a class="navbar-brand" href="/">Start</a>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarsExampleDefault" aria-controls="navbarsExampleDefault" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
    </button>

    <div class="collapse navbar-collapse" id="navbarsExampleDefault">
        <ul class="navbar-nav mr-auto">
            <li class="nav-item active">
                <a class="nav-link" href="/compiler">Compiler <span class="sr-only">(current)</span></a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="/DocPage">Documentation</a>
            </li>

            <li class="nav-item dropdown">
                <a class="nav-link dropdown-toggle" href="" id="dropdown01" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">More</a>
                <div class="dropdown-menu" aria-labelledby="dropdown01">
                    <a class="dropdown-item" id="bigl1" href="/Contact">Contact</a>
                    <a class="dropdown-item" id="bigl2" href="https://github.com/aleksander-mendoza/SolomonoffLib">GitHub</a>
                    <a class="dropdown-item" id="bigl3" href="/Download">Download</a>
                    <!-- <a class="dropdown-item" href="https://getbootstrap.com/docs/4.5/examples/jumbotron/#">Something else here</a> -->
                </div>
            </li>
        </ul>

    </div>
</nav>

<main role="main">
    <div style="padding-top: 64px;">

        <div class="row_cont">
            <div class="first">
                Code:

                <div id="editor" class="boob" style=" background-color: #18222d;"></div>

                <script type="text/javascript" src="js/ace/build/src/ace.js"></script>
                <script type="text/javascript" src="js/ace/build/src/ext-language_tools.js"></script>
                <script type="text/javascript" src="js/ace/build/src/mode-mealy.js"></script>
                <script>


                        var langTools = ace.require("ace/ext/language_tools");
                        var editor = ace.edit("editor");
                        editor.session.setMode("ace/mode/mealy");
                        editor.setTheme("ace/theme/monokai");

                        editorChangeCounter = 0
                        editor.getSession().on('change', function() {
                          editorChangeCounter = (editorChangeCounter+1)%5
                          if(editorChangeCounter===4){
                              setCookie('code',editor.getSession().getValue())
                              console.log("code updated")
                          }
                        });

                        editor.setOptions({
                            enableBasicAutocompletion: [{
                                getCompletions: (editor, session, pos, prefix, callback) => {
                                  // note, won't fire if caret is at a word that does not have these letters
                                  console.log('pref='+prefix)
                                  callback(null, [
                                    {name: 'subtract[', value: 'subtract[]', score: 1, meta: 'difference of two languages'},
                                    {name: 'rpni!(', value: 'rpni!()', score: 1, meta: 'RPNI inference algorithm'},
                                    {name: 'rpni_mealy!(', value: 'rpni_mealy!()', score: 1, meta: 'RPNI for Mealy machiens'},
                                    {name: 'ostia!(', value: 'ostia!()', score: 1, meta: 'OSTIA inference for transducers'},
                                    {name: 'compose[', value: 'compose[]', score: 1, meta: 'transducer composition'},
                                    {name: 'inverse[', value: 'inverse[]', score: 1, meta: 'transducer inversion'},
                                    {name: ':eval', value: ':eval', snippet: ':eval ${1:transducer_name} \'${2:input_string}\'', score: 1, meta: 'evaluate transducer'},
                                    {name: ':ls', value: ':ls', score: 1, meta: 'list defined transducers'},
                                    {name: ':unset', value: ':unset', snippet: ':unset ${1:transducer_name}', score: 1, meta: 'undefine transducer'},
                                    {name: ':reset', value: ':reset', score: 1, meta: 'undefine all transducers'},
                                    {name: '/**/', value: '/**/', score: 1, meta: 'block comment'},
                                    {name: '//', value: '//', score: 1, meta: 'line comment'},
                                    {name: ':vis', value: ':vis',snippet: ':vis ${1:transducer_name}', score: 1, meta: 'visualizes automaton'},
                                    {name: ':pipes', value: ':pipes', score: 1, meta: 'list pipelines'},
                                    {name: ':size', value:':size',snippet: ':size ${1:transducer_name}', score: 1, meta: 'print size of automaton'},
                                    {name: ':load', value: ':load', score: 1, meta: 'reload source file'},
                                    {name: ':is_det', value:':is_det', snippet: ':is_det ${1:transducer_name}', score: 1, meta: 'check determinism'},
                                    {name: ':equal x y', value:':equal', snippet: ':equal ${1:transducer_name1} ${2:transducer_name2}', score: 1, meta: 'check equivalence'},
                                    {name: ':run', value:':run',snippet: ':run @${1:transducer_name} \'${2:input_string}\'', score: 1, meta: 'evaluate pipeline'},
                                    {name: ':clear', value: ':clear', score: 1, meta: 'clears console'},
                                    {name: ':rand_sample of_size', value:':rand_sample', snippet: ':rand_sample ${1:transducer_name} of_size ${2:number}', score: 1, meta: 'randomly generate sample'},
                                    {name: ':rand_sample of_length', value:':rand_sample', snippet: ':rand_sample ${1:transducer_name} of_length ${2:number}', score: 1, meta: 'randomly generate sample'},
                                  ]);
                                },
                              }],
                            enableSnippets: true,
                            enableLiveAutocompletion: true
                        });

                        isSelected = false
                        editor.selection.on('changeSelection', function() {
                              if(editor.getSelectedText()===""){
                                if(isSelected){
                                   btnn.innerText = "Compile"
                                   isSelected = false
                                }
                              }else{
                                if(!isSelected){
                                   btnn.innerText = "Compile selection"
                                   isSelected = true
                                }
                              }
                        });
                    </script>


                Console: <span ><button class="buttonSmall float-right" style="background-color: white; color: black; border: 2px solid #FFA500;"  onclick="repl(':clear')">Clear</button></span>

                <textarea readonly id="outputField" th:text="${repl_history}" placeholder=">"></textarea>

                <ul hidden="true" id="automataHtmlList"></ul>
                <textarea id="inputField" name="inp" style="min-height:1em" placeholder="Console input (Hit enter to submit, use up and down arrow keys to traverse history):"></textarea>

                <div  id="tipsDiv" class="" style="min-height:5%" >Defined variables:<span id = "tips" th:text="${automata}"></span></div>

            </div>

            <div class="second" style="background: #bfc4c9">

                <div class="buttonSection">
                    <button class="button button1" id="btnn"  onclick="compile()">
                        Compile
                    </button>
                    <button class="button button3" id="btnn1"onclick="saveStaticDataToFile()">
                        Save
                    </button>

                    <button class="button button2 .btnn" onclick="repl(':reset')" >
                        Reset
                    </button></div>

                <div class="ex1" id="tutorial" style="overflow-y: scroll; overflow-x: hidden;">
                    <h2>Quick tour</h2>

                    Solomonoff is a regular language with many enhancements.
                    It compiles to symbolic weighted transducers.
                    Just like in UNIX regexes, you can use <a class="qgca">* | ? +</a>
                    and square brackets with ranges like
                    <a class="qgca">[a-z]</a> or <a class="qgca">[0-1]</a>.
                    Each such range is later compiled to a single transition.
                    For this reason you are not allowed to combine them together.
                    For instance the following are not valid
                    <a class="qgca">[a-z0-1]</a>, <a class="qgca">[a]</a>,
                    <a class="qgca">[a-z0]</a>. All literal strings have to be enclosed in single quotes, like <a class="qgca">'a'</a>,
                    <a class="qgca">'str\ning'</a> or the empty string <a class="qgca">''</a>.
                    Hence the UNIX regex <br/> <a class="qgca">(AA[0-9a-z]BB+)*</a> <br/>
                    might be equivalently written in Solomonoff as <br/>
                    <a class="qgca">('AA' ([0-9]|[a-z])'B' 'B'+)*</a>.
                    <br/><br/>
                    Every regular expression needs to be defined as a variable

                    <pre class="qgca" onclick="insert(htmlDecode(this.innerHTML))" >
x = ('AA' ([0-9]|[a-z])'B' 'B'+)*</pre>
                    Several variables can be used as building blocks for larger expressions.
                    <pre id="codeTutorial" class="qgca" onclick="insert(htmlDecode(this.innerHTML))" >
x = 'he' 'l'+ 'lo'
y = 'world'
hello_world=x ' ' y</pre>
                    You can click on the above examples to copy them to code editor. Then press
                    "compile" button and you will be able to test them in REPL.
                    <pre class="qgca" onclick="inputField.value=unescape(this.innerHTML)" >
:eval hello_world 'hellllllo world'</pre>
                    Type the above command in console (or click to automatically copy it).
                    Notice that typing <pre class="qgca" onclick="inputField.value=unescape(this.innerHTML)" >
:eval x 'hellllllo'</pre>
                    results in <a class="qgca">Transducer 'x' not found!</a>. That's because
                    variables can be <b>introduced</b> to the scope as well as <b>consumed</b>.
                    All copies must be made explicitly by the user (similarly like in Rust).
                    <br/><br/>
                    Below the REPL console you may see the current list of defined variables. Whenever
                    you use a variable as a building block for another expression, the variables is consumed.
                    In order to prevent this, you need to explicitly copy the variable using double exclamation marks <pre class="qgca" onclick="insert(htmlDecode(this.innerHTML))" >
x = 'he' 'l'+ 'lo'
y = 'world'
hello_world2= !!x ' ' !!y</pre>
                    Now if you compile this, you will be able to run <pre class="qgca" onclick="inputField.value=unescape(this.innerHTML)" >
:eval x 'hellllllo'</pre>
                    Be careful not to redefine variables that are already defined. Notice that we
                    created <a class="qgca">hello_world2</a> instead of
                    <a class="qgca">hello_world</a>, because the latter was already
                    created and was not yet consumed. You can only redeclare a variable after it was consumed.
                    Alternatively you may also run<pre class="qgca" onclick="inputField.value=unescape(this.innerHTML)" >
:unset hello_world</pre>
                    <br/>
                    <br/>
                    It's possible to use comments. The syntax is the same as in C, Java, Rust and many other languages<pre class="qgca" onclick="insert(htmlDecode(this.innerHTML))" >
//single line comment

/*multi
line
comment*/</pre>

                    <br/>
                    <br/>
                    The core feature of Solomonoff is of course the transducers.
                    This means that you can specify output printed by any regular expression.
                    For example <pre class="qgca" onclick="insert(htmlDecode(this.innerHTML))" >
z = 'a':'b'</pre>
                    will print <a class="qgca">b</a> as the output
                    whenever <a class="qgca">a</a> is matched.
                    Try it with <pre class="qgca" onclick="inputField.value=unescape(this.innerHTML)" >
:eval z 'a'</pre>
                    Another example might be<pre class="qgca" onclick="insert(htmlDecode(this.innerHTML))" >
z2 = ('a':'b')*
z3 = [0-9]:'cde'
z4 = :'prefix' !!z2 !!z3
z5 = '':'01234'</pre>
                    The outputs get concatenated if specified one after the other<pre class="qgca" onclick="insert(htmlDecode(this.innerHTML))" >
z6= :'a' :'b' '0' </pre>
                    The order of input and output strings often doesn't matter.
                    The following are all equivalent<pre class="qgca" onclick="insert(htmlDecode(this.innerHTML))" >
z7= 'abc':'012'
z8= :'012' 'abc'
z9= :'01' 'a' :'2' 'bc'
z10= :'0' 'a' :'1' 'b' :'2' 'c'</pre>
                    However the following are not equivalent<pre class="qgca" onclick="insert(htmlDecode(this.innerHTML))" >
z11= 'a':'0' | 'b'
z12= 'a' | 'b':'0'
z13= ('a' | 'b'):'0'</pre>
                    and neither are those<pre class="qgca" onclick="insert(htmlDecode(this.innerHTML))" >
z14= 'a'*:'0'
z15= ('a':'0')*</pre>
                    In other words, the input strings commute with output strings when concatenated.
                    <br/>
                    <br/>
                    In Solomonoff everything is a 32-bit integer. You can write unicode strings for convenience<pre class="qgca" onclick="insert(htmlDecode(this.innerHTML))" >
z16='寿司が好きです'</pre>
                    but under the hood it's nothing more than a sequence of integers. You can write
                    with integers directly using the angle bracket notation <a class="qgca">&lt;&gt;</a>. For example the
                    previous example could be equivalently written as <pre class="qgca" onclick="insert(htmlDecode(this.innerHTML))" >
z17=&lt;23551 21496 12364 22909 12365 12391 12377&gt;</pre>
                    Similarly, instead of <a class="qgca">[a-z]</a> you may write <a class="qgca">&lt;97-122&gt;</a>
                    <br/>
                    <br/>
                    You can visualise state graphs of automata using the command <pre class="qgca" onclick="inputField.value=unescape(this.innerHTML)" >
:vis z6</pre>
                    This way you will exactly see how the regular expression determines structure of automaton.
                    There is a one-to-one correspondence between symbols input symbols in expressions and states in
                    automaton. Every range <a class="qgca">[a-z]</a> translates to a single state.
                    Every input string <a class="qgca">'xyz'</a> is a concatenation of individual letters
                    <a class="qgca">'x' 'y' 'z'</a> and each of them is nothing more than a singleton range
                    <a class="qgca">[x-x] [y-y] [z-z]</a>. Each range, like for instance <a class="qgca">[a-z]</a>, becomes an individual state in the graph
                    and all transitions incoming to it have input label  <a class="qgca"><97-122></a> (because those are the
                    corresponding ASCII numbers for a and z). There is also one more initial state that does not correspond to
                    any input symbol. We encourage the user to experiment with different graphs and regexes.
                    <br/>
                    <br/>
                    To see the full list of available REPL commands, you may type
                    <pre class="qgca" onclick="inputField.value=unescape(this.innerHTML)" >:?</pre>
                    <br/>
                    Solomonoff comes with support for inductive inference out-of-the-box.
                    You can learn automata from examples. The following presents RPNI algorithm
                    for learning acceptors (also known as DFA) from positive and negative examples.<pre class="qgca" onclick="inputField.value=unescape(this.innerHTML)">
learn1 = rpni!('ab','a':#,'aba':#,'abab','ababa':#)</pre>
                    The examples <a class="qgca">'ab', 'abab'</a> are recognized by automaton, whereas
                    <a class="qgca">'a':#, 'aba':#, 'ababa':#</a> are negative examples that could be rejected.
                    You can now evaluate
                    <pre class="qgca" onclick="inputField.value=unescape(this.innerHTML)">
:eval learn1 'abababababab'</pre>
                    and notice that the automaton has successfully learned to continue the pattern.
                    Similarly you can use RPNI for learning mealy automata<pre class="qgca" onclick="inputField.value=unescape(this.innerHTML)" >
learn2 = rpni_mealy!('ab':'01','a':'0','aba':'012','abab':'0121','ababa':'01210')</pre>
                    and you can see how the pattern is extrapolated to<pre class="qgca" onclick="inputField.value=unescape(this.innerHTML)">
:eval learn2 'abababababababababab'</pre>
                    In case of mealy machines, an  <a class="qgca">IllegalArgumentException</a> will be throw
                    when the length of input string does not match the length of output string.
                    To learn strings of different lengths a more powerful model is needed. You may
                    learn transducers with OSTIA algorithm<pre class="qgca" onclick="inputField.value=unescape(this.innerHTML)">
learn3 = ostia!('ab':'0','abab':'01','ababab':'010','abababab':'0101')</pre>
                    and you may test it with<pre class="qgca" onclick="inputField.value=unescape(this.innerHTML)">
:eval learn3 'ababababababab'</pre>

                    <br/>
                    <br/>
                    Solomonoff supports many additional operations. The inverse of transducer swaps inputs with outputs
                    <pre class="qgca" onclick="insert(htmlDecode(this.innerHTML))" >
inverted = inverse['a':'b']</pre>
                    Test it with<pre class="qgca" onclick="inputField.value=unescape(this.innerHTML)">
:eval inverted 'b'</pre>
                    The result is equivalent to writing<pre class="qgca" onclick="insert(htmlDecode(this.innerHTML))" >
inverted = :'a' 'b'</pre>
                    <br/>
                    The composition operation, feeds the output of one transducer as input to the other.
                    <pre class="qgca" onclick="insert(htmlDecode(this.innerHTML))" >
composed = compose['a':'b', 'b':'c']</pre>
                    Test it with<pre class="qgca" onclick="inputField.value=unescape(this.innerHTML)">
:eval composed 'a'</pre>
                    The result is equivalent to writing<pre class="qgca" onclick="insert(htmlDecode(this.innerHTML))" >
composed = 'a':'c'</pre>
                    <br/>
                    The difference operation, removes from one transducer all the strings accepted by the other
                    <pre class="qgca" onclick="insert(htmlDecode(this.innerHTML))" >
difference = subtract['a'|'b', 'b']</pre>
                    Test it with<pre class="qgca" onclick="inputField.value=unescape(this.innerHTML)">
:eval difference 'a'</pre>
                    but notice that it does not work for the other string
                    <pre class="qgca" onclick="inputField.value=unescape(this.innerHTML)">
:eval difference 'b'</pre>
                    The result is equivalent to writing<pre class="qgca" onclick="insert(htmlDecode(this.innerHTML))" >
difference = 'a'</pre>
                    <br/>

                    For more information, come to our github page!
                    Link can be found in the navigation bar under the tab "More".







                    <!--                            <div id="ji">lol</div>-->

                    <!-- The Modal -->
                    <div id="myModal" class="modal">

                        <!-- Modal content -->
                        <div class="modal-content">
                            <div class="modal-header">
                                <span class="close" style="margin-left: 0px" onclick="closeModel()">&times;</span>
                                <h2>State Graph</h2>
                            </div>
                            <div class="modal-body">
                                <p id = "graphTitle">The edges are labeled with input ranges, output strings and weights. The format is (&lt;rangeBeginning-rangeEnd&gt;:'outputString' weight)</p>

                                <div id="ji">lol</div>
                            </div>

                        </div>

                    </div>


                </div>


            </div>
        </div>

</main>


<script>
    

      if (document.cookie.match('(?<=(;|^)\\s*FirstTime=)[^;]*')==null){
          document.cookie = "FirstTime=; Max-Age=216000"
     

      var enjoyhint_instance = new EnjoyHint({});
      var enjoyhint_script_steps = [
       {
        	'next #editor' : 'You can write Solomonoff code in this editor'
      	},
        {
          'next #btnn' : 'Then click this button to compile your code'
        },
        {
      	  'next #outputField' : 'After compiling, you can interact with the automata from REPL'
        },
        {
          'next #inputField' : 'Write REPL input in this line'
        },
        {
          'next #btnn1' : 'If you want to save your changes for later or work with them locally, you can conveniently click this button'
        },
        {
          'next #tutorial' : 'Go ahead and check out the interactive tutorial we made speically for you'
        },
        {
          'next #codeTutorial' : 'If you click on any sample, it will automatically appear in the correct places'
        },



        ];
        enjoyhint_instance.set(enjoyhint_script_steps);
        enjoyhint_instance.run();}
    </script>



</div>


</body>
</html>

